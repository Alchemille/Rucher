{% extends "base.html"%}
{% block content %}
<div class="jumbotron">

  <div class="container">


  <div class="row">
    {% for i in ruchers %}

    <div class="col-md-3 mb-4">
    <div class="card border-info mb-3 ">

      <div class="center-cropped card-img-top" style="background-image: url('{{ i.get_url_image() }}'); height: 200px;">
        <a href="{{ url_for('see_rucher', id=i.id) }}">
          <img src="{{ i.get_url_image() }}" />
        </a>

      </div>

      <div class="card-body d-flex">
        <p class="card_text_rucher card-text">{{ i }}</p>
        <form action="{{ url_for('delete_rucher', id=i.id) }}" method="post" class="ml-auto">
          <button class="btn btn-dark" type="submit">
            <svg class="bi bi-trash-fill" width="20" height="20" viewBox="0 0 16 16" fill="currentColor"
              xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd"
                d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z" />
            </svg>
          </button>
        </form>
      </div>
    </div>
    </div>
    {% endfor %}
  </div>

  <div>
    <a class="btn btn-primary" href="{{url_for('add_rucher')}}">Ajouter un rucher</a>
  </div>
  </div>




</div>

<div class="jumbotron_feli jumbotron">
  <div class="d-flex justify-content-center align-items-center">
    <div class="border border-info" id='map' style='width: 850px; height: 650px;'></div>

      <script>

          mapboxgl.accessToken = 'pk.eyJ1IjoianNvbWEiLCJhIjoibFJmYl9JWSJ9.AUm8d76cbOvVEn2mMeG_ZA';
          var map = new mapboxgl.Map({
              container: 'map',
              style: 'mapbox://styles/mapbox/outdoors-v11',
              center: [0.529145, 45.390493],
              zoom: 9.5
          });
          map.on('load', function () {
              
              var positions = {{ positions| safe
          }}
              positions.forEach(function (marker) {
              var el = document.createElement('div');
              el.className = 'marker';

              new mapboxgl.Marker(el)
                  .setLngLat(marker.geometry.coordinates)
                  .setPopup(new mapboxgl.Popup({ offset: [0, -15] }) // add popups
                  .setHTML(marker.properties.description))
                  .addTo(map);
              });
          })

      </script>
    <p></p>
  </div>
</div>


{% endblock %}